function createRequestObject(){	var request_;	var browser = navigator.appName;	if(browser == "Microsoft Internet Explorer"){		 request_ = new ActiveXObject("Microsoft.XMLHTTP");	}else{		 request_ = new XMLHttpRequest();	}	return request_;}var http_forn = new Array();function gravar(formulatio,redireciona,pagina,janela) {	var acao = 'gravar';	url = "rg_recebimento_ajax.php?ajax=sim&acao="+acao;	parametros = "";	for( var i = 0 ; i < formulatio.length; i++ ){		if (formulatio.elements[i].type !='button'){			if(formulatio.elements[i].type=='radio' || formulatio.elements[i].type=='checkbox'){								if(formulatio.elements[i].checked == true){					parametros = parametros+"&"+formulatio.elements[i].name+"="+escape(formulatio.elements[i].value);				}			}else{				parametros = parametros+"&"+formulatio.elements[i].name+"="+escape(formulatio.elements[i].value);			}		}	}	var com       = document.getElementById('div_produto');	var saida     = document.getElementById('saida');	saida.innerHTML = "&nbsp;&nbsp;Aguarde...&nbsp;&nbsp;<br><img src='imagens/carregar2.gif' >";	var curDateTime = new Date();	http_forn[curDateTime] = createRequestObject();	http_forn[curDateTime].open('POST',url,true);	http_forn[curDateTime].setRequestHeader("Content-type", "application/x-www-form-urlencoded");	http_forn[curDateTime].setRequestHeader("CharSet", "ISO-8859-1");	http_forn[curDateTime].setRequestHeader("Content-length", url.length);	http_forn[curDateTime].setRequestHeader("Connection", "close");	http_forn[curDateTime].onreadystatechange = function(){		if (http_forn[curDateTime].readyState == 4){			if (http_forn[curDateTime].status == 200 || http_forn[curDateTime].status == 304){			var response = http_forn[curDateTime].responseText.split("|");				if (response[0]=="ok"){					saida.style.visibility = "hidden";					saida.innerHTML = "";					document.getElementById("codigo_barra").focus();					if (response[3]=="produto") MostraInfo('1');					else                        MostraInfo('0');					for( var i = 0 ; i < formulatio.length; i++ ){						if (formulatio.elements[i].type !='button'){							if(formulatio.elements[i].type=='radio' || formulatio.elements[i].type=='checkbox'){								if(formulatio.elements[i].checked == true){									formulatio.elements[i].checked=false;								}							}else{								formulatio.elements[i].value='';							}						}					}				}				if (response[0]=="1"){					saida.style.visibility = "hidden";					saida.innerHTML = "";					com.style.visibility = "visible";					com.innerHTML = response[1];				}			}		}	}	http_forn[curDateTime].send(parametros);}function verifica_codigo_barra() {	/*Verificacao para existencia de componente - HD 22891 */	if (document.getElementById('div_produto')){		var ref = document.getElementById('codigo_barra').value;		url = "rg_recebimento_ajax.php?ajax=codigo_barra&codigo_barra="+ref;		var curDateTime = new Date();		http_forn[curDateTime] = createRequestObject();		http_forn[curDateTime].open('GET',url,true);		http_forn[curDateTime].onreadystatechange = function(){			if (http_forn[curDateTime].readyState == 4){				if (http_forn[curDateTime].status == 200 || http_forn[curDateTime].status == 304){					var response = http_forn[curDateTime].responseText.split("|");					if (response[0]=="ok"){						document.getElementById('div_produto').style.visibility = "visible";						document.getElementById('div_produto').style.position   = 'static';						document.getElementById('div_produto').innerHTML        = response[1];						document.getElementById('div_foto').style.visibility   = "visible";						document.getElementById('div_foto').style.position     = 'static';						document.getElementById('div_foto').innerHTML          = response[2];						document.getElementById('div_quadro').style.visibility = "visible";						document.getElementById('div_quadro').style.position   = 'static';						document.getElementById('div_quadro').innerHTML        = response[3];											}else{						document.getElementById('div_produto').style.visibility = "hidden";						document.getElementById('div_produto').style.position   = 'absolute';					}				}			}		}		http_forn[curDateTime].send(null);	}}function MostraInfo(x) {	var saida  = document.getElementById('saida');	var quadro = document.getElementById('div_quadro');	url = "rg_recebimento_ajax.php?ajax=sim&acao=mostrar&x="+x;	var curDateTime = new Date();	http_forn[curDateTime] = createRequestObject();	http_forn[curDateTime].open('GET',url,true);	http_forn[curDateTime].onreadystatechange = function(){		if (http_forn[curDateTime].readyState == 4){			if (http_forn[curDateTime].status == 200 || http_forn[curDateTime].status == 304){				var response = http_forn[curDateTime].responseText.split("|");				if (response[0]=="ok"){					saida.innerHTML       = response[1];					saida.style.visibility = "visible";					saida.style.position   = "static";					quadro.style.visibility = "visible";					quadro.style.position = 'static';					quadro.innerHTML = response[2];					if(x==1) ativar();				}			}		}	}	http_forn[curDateTime].send(null);}function ativar(){	linha_campos_0.style.display='block' ;	linha_descricao_0.style.display='none' ;	document.getElementById('ja_estou_editando').value = '1' ;	executar('produto_0','id_produto_0');	document.getElementById('produto_0').focus();}function foco(){	document.getElementById("codigo_barra").focus();}function proximo() {	var tecla = event.keyCode;	if ((tecla == 13)) { 		document.getElementById("rg").focus();	}	return tecla;}function proximo2() {	var tecla = event.keyCode;	if ((tecla == 13)) { 		gravar(this.form,'sim','<?=$PHP_SELF;?>','nao');	}	return tecla;}function gravar_produto(produto,produto_rg_item,div1,produto_rg,div2) {	var acao = 'gravar';	url = "rg_conferencia_ajax.php?ajax=item&produto_rg_item="+produto_rg_item+"&produto="+produto;	var saida     = document.getElementById(div1);	var parametros = "";	saida.style.display='block';	saida.innerHTML = "<img src='js/indicator.gif' >";	var curDateTime = new Date();	http_forn[curDateTime] = createRequestObject();	http_forn[curDateTime].open('POST',url,true);		http_forn[curDateTime].setRequestHeader("Content-type", "application/x-www-form-urlencoded");	http_forn[curDateTime].setRequestHeader("CharSet", "ISO-8859-1");	http_forn[curDateTime].setRequestHeader("Content-length", url.length);	http_forn[curDateTime].setRequestHeader("Connection", "close");	http_forn[curDateTime].onreadystatechange = function(){		if (http_forn[curDateTime].readyState == 4){			if (http_forn[curDateTime].status == 200 || http_forn[curDateTime].status == 304){			var response = http_forn[curDateTime].responseText.split("|");				if (response[0]=="ok"){					saida.innerHTML   = "&nbsp;";					saida.style.display='none';					confere(produto_rg,div2);					MostraInfo();				}			}		}	}	http_forn[curDateTime].send(parametros);}function confere(produto_rg,div) {	var acao = 'gravar';	url = "rg_conferencia_ajax.php?ajax=produto_rg&produto_rg="+produto_rg;	var saida     = document.getElementById(div);	var parametros = "";	var curDateTime = new Date();	http_forn[curDateTime] = createRequestObject();	http_forn[curDateTime].open('POST',url,true);		http_forn[curDateTime].setRequestHeader("Content-type", "application/x-www-form-urlencoded");	http_forn[curDateTime].setRequestHeader("CharSet", "ISO-8859-1");	http_forn[curDateTime].setRequestHeader("Content-length", url.length);	http_forn[curDateTime].setRequestHeader("Connection", "close");	http_forn[curDateTime].onreadystatechange = function(){		if (http_forn[curDateTime].readyState == 4){			if (http_forn[curDateTime].status == 200 || http_forn[curDateTime].status == 304){			var response = http_forn[curDateTime].responseText.split("|");				if (response[0]=="ok"){					saida.style.display='block';				}else{				}			}		}	}	http_forn[curDateTime].send(parametros);}function executar(campo1,campo2) {	/* Busca pelo Nome */	$('#'+campo1).autocomplete("pesquisa.php?tipo=produto&busca=tudo", {		minChars: 3,		delay: 150,		width: 350,		matchContains: true,		highlightItem: false,		formatItem: function (row) {return row[4]},		formatResult: function(row)  {return row[2];}	});	$('#'+campo1).result(function(event, data, formatted) {		$('#'+campo2).val(data[0])    ;		this.focus() ;	});}