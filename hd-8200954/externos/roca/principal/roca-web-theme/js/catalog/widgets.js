function addWidgets(zone,idParam,url,filterText){var loadingBoxDiv=$("<div id='infinite_scroll_loading_box'><span></span></div>");$('#ecommerce_widgets').append(loadingBoxDiv);$('#infinite_scroll_loading_box').fadeIn('slow',function(){});$.ajax({type:"POST",url:"/ecommerce-widgets",data:"zone="+zone+"&url="+url+"&"+idParam+"&filterText="+filterText,async:true,success:function(data){$('#infinite_scroll_loading_box').fadeOut('slow');$('#infinite_scroll_loading_box').remove();$('#ecommerce_widgets').replaceWith(data);addProductMosaicEventListenersWidget();resizeSimpleProductWidgetSlider();dotdotdotWidgetContainedDescriptions();scrolling=false;}});}function addWidgetsButton(zone, idParam, url, filterText) {$.ajax({type: "POST",url: "/ecommerce-widgets",data: "zone=" + zone + "&url=" + url + "&" + idParam + "&filterText=" + filterText,async: true,success: function(data) {if(data.replace("\n","")!="<script>initializeWidgets();"){$('#ecommerce_widgets_button').html(data);}else{$('#ecommerce_widgets_button').height(0);}}});}function allResultsAreShown(){if($("#numTotal").text()!=''){return parseInt($('[class="product-mosaic-list"]').length)==parseInt($('#numTotal').text());}return true;}function resizeSimpleProductWidgetSlider(){if($('.swiper-container.product-mosaic.focused.swiper-container-horizontal.twelve.columns.widget1 li').length<6){$('.swiper-container.product-mosaic.focused.swiper-container-horizontal.twelve.columns.widget1').css('background','white');$('.widget-focused-button-next.widget1').css('display','none');$('.widget-focused-button-prev.widget1').css('display','none');}}function initHomeSwiper(productsPerPage){var swiperHome=new Swiper('.widget-home',{pagination:'.widget-pagination',slidesPerView:productsPerPage,slidesPerGroup:productsPerPage,paginationClickable:true,nextButton:'.widget-button-next',prevButton:'.widget-button-prev',spaceBetween:8,autoplay:45000});dotdotdotWidgetContainedDescriptions();}function dotdotdotWidgetContainedDescriptions(){if($("div[class|='widget']").length>0){for(var i=0;i<$("div[class|='widget'] p.description").length;i++){$("div[class|='widget'] p.description")[i].setAttribute("title",$("div[class|='widget'] p.description").eq(i).text())}$("div[class|='widget'] p.description").dotdotdot({height:60,fallbackToLetter:true,watch:true});}}function addProductMosaicEventListenersWidget(){$(document).foundationCustomForms();$('.no-touch li.product-mosaic-list a').mouseover(function(){var myarrowin=$(this).find('span.arrow-right');myarrowin.show();return false;});$('.no-touch li.product-mosaic-list a').mouseout(function(){var myarrowout=$(this).find('span.arrow-right');myarrowout.hide();return false;});$(window).scroll(function(){if(!scrolling){var windowScrollTop=$(window).scrollTop();var documentHeight=$(document).height();var windowHeight=$(window).height();if($('li.product-mosaic-list').last().offset()!=undefined){var lastItemTop=$('li.product-mosaic-list').last().offset().top;var lastItemHeight=$('li.product-mosaic-list').last().height();if((lastItemTop+lastItemHeight)<(windowScrollTop+windowHeight)){if(!allResultsAreShown()){scrollNext();}}}}});$(".add.wish .checkbox").unbind('click');$(".add.wish .checkbox").click(function(event){var checked=!$(this).hasClass('checked');var params=$(this).parent().parent().children().first().attr("value");if(checked){var url=contextPath+"/servlet/ajax/add-wish-list?"+params;$.post(url,function(data){refreshMyRocaMenu();});}else{var url=contextPath+"/servlet/ajax/remove-wish-list?"+params;$.post(url,function(data){refreshMyRocaMenu();});}});$(".add.compa .checkbox").unbind('click');$(".add.compa .checkbox").click(function(event){var checked=!$(this).hasClass('checked');var params=$(this).parent().parent().children().first().attr("value");if(checked){var url=contextPath+"/servlet/ajax/add-product-comparer?"+params;$.post(url,function(data){refreshProductComparer();});}else{var url=contextPath+"/servlet/ajax/remove-product-comparer?"+params;$.post(url,function(data){refreshProductComparer();});}});var adv1=$('#my-roca-message-wish');$(".add.wish").unbind('click');$('.add.wish').click(function(){$(adv1).fadeIn("fast",function(){$(adv1).delay(500).fadeOut('slow');});});var adv2=$('#my-roca-message-comparer');$(".add.compa").unbind('click');$('.add.compa').click(function(){$(adv2).fadeIn("fast",function(){$(adv2).delay(500).fadeOut('slow');});});var wishTitle=$("div.add.wish input").attr("value");$(".no-touch .add.wish .checkbox").unbind("mouseenter");$(".no-touch .add.wish .checkbox").mouseenter(function(){var thebox=$(this).next('.msg');thebox.empty();thebox.append(wishTitle);thebox.fadeIn('fast');});var comparerTitle=$(".add.compa input").attr("value");$(".no-touch .add.compa .checkbox").unbind("mouseenter");$(".no-touch .add.compa .checkbox").mouseenter(function(){var thebox=$(this).next('.msg');thebox.empty();thebox.append(comparerTitle);thebox.fadeIn('fast');});var shopTitle=$(".add.shop input").attr("value");$(".no-touch .add.shop .checkbox").unbind("mouseenter");$(".no-touch .add.shop .checkbox").mouseenter(function(){var thebox=$(this).next('.msg');thebox.empty();thebox.append(shopTitle);thebox.fadeIn('fast');});$(".no-touch .add .checkbox").unbind("mouseout");$(".no-touch .add .checkbox").mouseout(function(){var thebox=$(this).next('.msg');thebox.fadeOut('fast');});}